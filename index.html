<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>COVID-19 STATS</title>
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>

  <h1>Statystyka dotycząca korona wirusa w Polsce</h1>
  <div class="latest"></div>

  <div class="DescriptionBox">
    <div class="table">
      <table>
        <tr class="tableHeader">
          <th>Data</th>
          <th>Zakażeni</th>
          <th class="tableRecovered">Wyleczeni</th>
          <th class="tableDead">Zgony</th>
        </tr>
       </table>
      </div>
  </div>


<script>
   fetch("https://pomber.github.io/covid19/timeseries.json").then(res=>res.json()).then(res=>{
    const { date, confirmed, deaths, recovered } = res.Poland[res.Poland.length - 1];
    const differenceC = res.Poland[res.Poland.length - 1].confirmed - res.Poland[res.Poland.length - 2].confirmed;
    const differenceR = res.Poland[res.Poland.length - 1].recovered - res.Poland[res.Poland.length - 2].recovered;
    const differenceD = res.Poland[res.Poland.length - 1].deaths - res.Poland[res.Poland.length - 2].deaths;
    
    let span=document.querySelector(".latest")
    span.innerHTML+=` <div class="dateDiv"> Stan na dzień: <span class="date">${date}</span> </div>
      <div class="todayBox todayConfirmedBox">
          Zakażeni
          <div class="todayInfo todayConfirmedInfo">
            ${confirmed} (+${differenceC})
          </div>
      </div>
      <div class="todayBox todayRecoveredBox">
          Wyleczeni
          <div class="todayInfo todayRecoveredInfo">
            ${recovered} (+${differenceR})
          </div>
      </div>
      <div class="todayBox todayDeadBox">
          Zgony
          <div class="todayInfo todayDeadInfo">
            ${deaths} (+${differenceD})
          </div>
      </div>
      `;
    
    res["Poland"].reverse().forEach(({ date, confirmed, recovered, deaths }) =>{
    let table=document.querySelector("table")
    table.innerHTML+=`<tr>
    <td> ${date} </td>
    <td> ${confirmed} </td>
    <td> ${recovered} </td>
    <td> ${deaths} </td>
    </tr>`;
    });
  }
)
</script>

</body>
</html>